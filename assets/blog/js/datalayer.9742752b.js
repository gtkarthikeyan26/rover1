const currentPageCategory=roverDataLayerVars.pageCategory||"unknown",cacheStatus="undefined"!=typeof window&&void 0!==window.edgeCache&&"string"==typeof window.edgeCache.edgeCacheStatus?tokenizeCacheStatus(window.edgeCache.edgeCacheStatus):"na",windowExists="undefined"!=typeof window;function tokenizeCacheStatus(status){return status.split(", ").join("-").toLowerCase()}windowExists&&(window.dataLayer=window.dataLayer||[],window.Rover=window.Rover||{},window.Rover.pageCategory=currentPageCategory);const rateLCP=value=>value<=1e4?"expected":1e4<value&&value<=1e5?"unexpected":"outlier",rateCLS=value=>value<.9?"expected":"unexpected";var CoreWebVitalMetrics,OtherWebVitalMetrics;!function(CoreWebVitalMetrics){CoreWebVitalMetrics.LCP="seo.largest_contentful_paint",CoreWebVitalMetrics.INP="seo.interaction_to_next_paint",CoreWebVitalMetrics.CLS="seo.cumulative_layout_shift"}(CoreWebVitalMetrics=CoreWebVitalMetrics||{}),function(OtherWebVitalMetrics){OtherWebVitalMetrics.TTFB="seo.time_to_first_byte",OtherWebVitalMetrics.FCP="seo.first_contentful_paint"}(OtherWebVitalMetrics=OtherWebVitalMetrics||{});const RATE_CORE_WEB_VITAL_VALUE={[CoreWebVitalMetrics.CLS]:rateCLS,[CoreWebVitalMetrics.LCP]:rateLCP},isCoreWebVitalMetric=value=>Object.values(CoreWebVitalMetrics).includes(value),rateCoreWebVitalValue=(metricName,value)=>RATE_CORE_WEB_VITAL_VALUE[metricName](value),isMobileBrowser=()=>!!isWindowNavigatorUserAgentDataDefined()&&window.navigator.userAgentData.mobile,isWindowNavigatorUserAgentDataDefined=()=>"undefined"!=typeof window&&window&&window.navigator&&window.navigator.userAgentData&&window.navigator.userAgentData.mobile&&"boolean"==typeof window.navigator.userAgentData.mobile;function getCWV(onCWV){return()=>new Promise(resolve=>{try{onCWV(metric=>resolve(metric))}catch(error){console.error(wrapAsError(error))}})}const getSourceDescription=()=>isMobileBrowser()?"mobile_web":"web";function wrapAsError(ambiguousError){return ambiguousError instanceof Error?ambiguousError:new Error(`Caught a non-Error (${typeof ambiguousError} that was thrown: ${JSON.stringify(ambiguousError)})`)}function pushEvent(event){return event.pageCategory=event.pageCategory||currentPageCategory,new Promise(resolve=>{setTimeout(()=>window.dataLayer.push(Object.assign(Object.assign({},event),{eventCallback:resolve})))})}var fireDataLayerEvent=function(event,timeout=500){return Promise.race([pushEvent(event),new Promise(resolve=>{setTimeout(resolve,timeout)})])},fireCWVMetricEvent=function(metric,pageviewId){fireDataLayerEvent({event:"core-web-vitals",name:metric.name,value:metric.value,rating:metric.rating,pageview_id:pageviewId,cache_status:cacheStatus})};function emitMetric(metricName,tags={},options={}){var{sampleRate:options=1,metricType="increment",metricValue=1}=options;window.alooma?Math.random()<=options&&window.alooma.track(metricName,{observability_metric_type:metricType,observability_metric_value:metricValue,observability_tags:tags,observability_only:!0}):console.log("window.alooma is not defined, cannot emit metric: "+metricName)}const emitCWVMetricForPage=(pageCategory,pageviewId)=>metricName=>metric=>{fireCWVMetricEvent(metric,pageviewId),emitMetric(metricName,Object.assign({page_identifier:pageCategory,source:getSourceDescription(),navigationType:metric.navigationType},isCoreWebVitalMetric(metricName)?{value_rating:rateCoreWebVitalValue(metricName,metric.value)}:{}),{sampleRate:.1,metricType:"distribution",metricValue:metric.value})},fireMetricEmitters=async()=>{const getCLS=getCWV(window.webVitals.onCLS),getLCP=getCWV(window.webVitals.onLCP),getTTFB=getCWV(window.webVitals.onTTFB),getINP=getCWV(window.webVitals.onINP),getFCP=getCWV(window.webVitals.onFCP);var[,,,]=await function(pageCategory){var LCP=getLCP(),CLS=getCLS(),TTFB=getTTFB(),INP=getINP(),FCP=getFCP(),pageviewId=generateUUID(),pageCategory=emitCWVMetricForPage(pageCategory,pageviewId);return LCP.then(pageCategory(CoreWebVitalMetrics.LCP)),CLS.then(pageCategory(CoreWebVitalMetrics.CLS)),TTFB.then(pageCategory(OtherWebVitalMetrics.TTFB)),INP.then(pageCategory(OtherWebVitalMetrics.INP)),FCP.then(pageCategory(OtherWebVitalMetrics.FCP)),Promise.all([INP,LCP,CLS])}(currentPageCategory)};let getRandomValues;const rnds8=new Uint8Array(16);function rng(){if(getRandomValues=getRandomValues||"undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto))return getRandomValues(rnds8);throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported")}function generateUUID(options,buf,offset){var rnds=(options=options||{}).random||(options.rng||rng)();if(rnds[6]=15&rnds[6]|64,rnds[8]=63&rnds[8]|128,buf){offset=offset||0;for(let i=0;i<16;++i)buf[offset+i]=rnds[i];return buf}return unsafeStringify(rnds)}function unsafeStringify(arr,offset=0){var byteToHex=[];for(let i=0;i<256;++i)byteToHex.push((i+256).toString(16).slice(1));return(byteToHex[arr[offset+0]]+byteToHex[arr[offset+1]]+byteToHex[arr[offset+2]]+byteToHex[arr[offset+3]]+"-"+byteToHex[arr[offset+4]]+byteToHex[arr[offset+5]]+"-"+byteToHex[arr[offset+6]]+byteToHex[arr[offset+7]]+"-"+byteToHex[arr[offset+8]]+byteToHex[arr[offset+9]]+"-"+byteToHex[arr[offset+10]]+byteToHex[arr[offset+11]]+byteToHex[arr[offset+12]]+byteToHex[arr[offset+13]]+byteToHex[arr[offset+14]]+byteToHex[arr[offset+15]]).toLowerCase()}var webVitalsScript=document.createElement("script");function dataLayerEvents(){if("undefined"!=typeof roverDataLayerVars){window.alooma.track_pageview(document.location.href,{environment:roverDataLayerVars.environment,pageCategory:currentPageCategory}),fireDataLayerEvent({event:"dataLayer-loaded"}),fetch("/api/v6/utilities/user-agent/").then(function(response){return response.ok?response.json():Promise.reject(response)}).then(function(data){data&&data.user_agent&&(alooma.register({user_agent:data.user_agent,is_bot:data.is_bot}),fireDataLayerEvent({event:"blog-link-user-agent"}))}).catch(function(err){console.warn("User agent fetch error: ",err)}),roverDataLayerVars.environment&&fireDataLayerEvent({environment:roverDataLayerVars.environment}),roverDataLayerVars.blogAuthor&&fireDataLayerEvent({blogAuthor:roverDataLayerVars.blogAuthor}),roverDataLayerVars.blogPostDate&&fireDataLayerEvent({blogPostDate:roverDataLayerVars.blogPostDate}),roverDataLayerVars.blogKeywords&&fireDataLayerEvent({blogKeywords:roverDataLayerVars.blogKeywords}),roverDataLayerVars.blogCategory&&fireDataLayerEvent({blogCategory:roverDataLayerVars.blogCategory}),document.body.classList.contains("has-sticky-footer")&&emitMetric("blog-has-cta-footer");document.addEventListener("click",function(event){var adUrl,socialUrl,event=event.target;event.matches(".resource-category a")?fireDataLayerEvent({event:"blog-sitter-resources-navigate-to-category",helpCategory:event.closest(".resource-category").id}):event.matches(".nav-primary .menu-item a")?fireDataLayerEvent({event:"blog-nav","click-url":event.href}):event.matches("ul.social-media-icons li a")||event.matches("ul.social-media-icons li a i")?(socialUrl="",socialUrl=(event.matches("ul.social-media-icons li a")?event:event.parentElement).href,fireDataLayerEvent({event:"blog-social-link",socialLinks:socialUrl})):event.matches("a.load-more")?fireDataLayerEvent({event:"blog-more-posts"}):event.matches(".rover-campaign a")||event.matches(".rover-campaign a img")?(adUrl=socialUrl="",adUrl=(event.matches(".rover-campaign a")?(socialUrl=event.parentElement.parentElement.id,event):(socialUrl=event.parentElement.parentElement.parentElement.id,event.parentElement)).href,socialUrl=socialUrl.replace("campaign","ad"),fireDataLayerEvent({event:"blog-ad-click","ad-name":socialUrl,"ad-url":adUrl}),fireDataLayerEvent({event:"banner-ad-click","ad-name":socialUrl,"ad-url":adUrl})):event.matches("a.button-shortcode")?fireDataLayerEvent({event:"blog-ad-click","ad-name":"buy-now-button","ad-url":event.href}):event.matches(".affiliate-post .entry-content a")?fireDataLayerEvent({event:"blog-ad-click","ad-name":"affiliate-link","ad-url":event.href}):event.matches("#sticky-footer a")?(fireDataLayerEvent({event:"blog-cta-footer-button-click","click-url":event.href}),emitMetric("blog-cta-footer-button-click")):event.matches("#close-sticky-footer")||event.closest("[id^='close-sticky-footer']")?fireDataLayerEvent({event:"blog-cta-footer-close","click-url":event.href}):event.closest("[id^='sticky-footer']")&&fireDataLayerEvent({event:"blog-cta-footer-no-action-click","click-url":"none"})});var stickyFooter=document.getElementById("sticky-footer"),searchForms=(stickyFooter&&stickyFooter.addEventListener("viewStickyFooter",function(){var windowHeight=window.innerHeight||(document.documentElement||document.body).clientHeight||document.body.clientHeight,docHeight=Math.max(document.documentElement.scrollHeight,document.documentElement.offsetHeight,document.documentElement.clientHeight,document.body.scrollHeight,document.body.offsetHeight,document.body.clientHeight),scrollDist=window.scrollY||(document.documentElement||document.body).scrollTop||document.body.scrollTop,windowHeight=Math.round(100*(1-(docHeight-(windowHeight+scrollDist))/docHeight));fireDataLayerEvent({event:"blog-cta-footer-view","milestone-value":windowHeight.toString()+"%"})},{once:!0}),document.querySelectorAll("form.search-form")),searchFormName="blog-search";void 0!==roverDataLayerVars.searchForm&&(searchFormName=roverDataLayerVars.searchForm);for(var i=0;i<searchForms.length;i++)searchForms[i].addEventListener("submit",function(event){event=event.target.querySelector('input[type="search"]').value;fireDataLayerEvent({event:searchFormName,searchTerm:event})});var stickyFooter=document.querySelectorAll(".rover-campaign"),bannerAdsViewed=[];const adScrollObserver=new IntersectionObserver(([e])=>{e.isIntersecting&&bannerAdVisible(e.target)},{threshold:1}),bannerAdVisible=(stickyFooter.forEach(function(e){adScrollObserver.observe(e)}),function(e){var adType,adUrl,adName;-1==bannerAdsViewed.indexOf(e.id)&&(adUrl=!1,"image"==(adType=e.dataset.adType)?adUrl=e.querySelector("a").href:"embed"==adType&&e.querySelector("iframe")?adUrl=e.querySelector("iframe").src:"embed"==adType&&e.querySelector("a")&&(adUrl=e.querySelector("a").href),adName=(adName=e.parentElement.id).replace("campaign","ad"),bannerAdsViewed.push(e.id),fireDataLayerEvent({event:"scroll-to-ad","ad-name":adName,"ad-url":adUrl,"ad-type":adType}))})}}webVitalsScript.src="https://unpkg.com/web-vitals@3.5.0/dist/web-vitals.iife.js",webVitalsScript.onload=()=>{window.addEventListener("load",()=>fireMetricEmitters())},document.head.appendChild(webVitalsScript),document.addEventListener("DOMContentLoaded",dataLayerEvents);